<!--_meta 作为公共模版分离出去-->
<include file='Index/meta'/>
<!--/meta 作为公共模版分离出去-->

<title>权限设置</title>
<link href="__PUBLIC__/lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />
<link href="__PUBLIC__/usercss/login.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #pingtuan{
        display:none;
    } 
</style>
</head> 
<body>
    <div class="register-wrap clearfix">
<div class="page-container"> 
    <div class="title"><h2>权限设置</h2></div>
	<form class="form form-horizontal"action="<{:U('role/authorizePost')}>" method="post" enctype="multipart/form-data">
        <div class="row cl">
            <div>
                <label class="form-label col-xs-4 col-sm-2">权限列表：</label>
            </div>
            <div class="formControls col-xs-8 col-sm-9">
                <table class="table table-bordered" id="authrule-tree">
                    <tbody>
                    <{$category}>
                    </tbody>
                </table>
            </div>
        </div>
		<div class="row cl">
			<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">
                <input type="hidden" name="roleId" value="<{$roleId}>" />
				<button  class="btn btn-primary radius" type="submit"><i class="Hui-iconfont">&#xe632;</i> 保存并提交</button>
				<button onClick="layer_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
			</div>
		</div>
	</form>
</div>
</div>
<!--_footer 作为公共模版分离出去--> 
<include file='Index/footer'/>
<!--/_footer /作为公共模版分离出去-->
<script src="__PUBLIC__/static/js/wind.js"></script>
<script src="__PUBLIC__/static/js/admin.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        Wind.css('treeTable');
        Wind.use('treeTable', function () {
            $("#authrule-tree").treeTable({
                indent: 20
            });
        });
    });

    function checknode(obj) {
        var chk = $("input[type='checkbox']");
        var count = chk.length;

        var num = chk.index(obj);
        var level_top = level_bottom = chk.eq(num).attr('level');
        for (var i = num; i >= 0; i--) {
            var le = chk.eq(i).attr('level');
            if (le <level_top) {
                chk.eq(i).prop("checked", true);
                var level_top = level_top - 1;
            }
        }
        for (var j = num + 1; j < count; j++) {
            var le = chk.eq(j).attr('level');
            if (chk.eq(num).prop("checked")) {

                if (le > level_bottom){
                    chk.eq(j).prop("checked", true);
                }
                else if (le == level_bottom){
                    break;
                }
            } else {
                if (le >level_bottom){
                    chk.eq(j).prop("checked", false);
                }else if(le == level_bottom){
                    break;
                }
            }
        }
    }
</script>
</body>
</html>